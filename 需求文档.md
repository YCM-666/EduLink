# 校园课程交流学习平台 - 需求文档（新增功能与优化点补充版）

## 项目概述

### 项目背景
校园课程交流学习平台是一个专为大学生设计的在线学习社区，旨在帮助学生更好地管理课程、分享学习笔记、交流学习心得，促进学生之间的知识共享和协作学习。

### 项目目标
- 为学生提供课程管理和学习资料分享平台
- 建立学习笔记共享和交流的社区环境
- 提升学生学习的互动性和协作性
- 提供个性化的学习体验和进度跟踪

## 技术栈

### 前端技术
- **框架**: Vue 3.3.4 + Composition API
- **路由**: Vue Router 4.2.4
- **样式**: 原生CSS + 响应式设计
- **构建工具**: Vite 4.4.5

### 后端技术
- **数据库**: Supabase (PostgreSQL)
- **认证**: Supabase Auth
- **API**: Supabase REST API

### 部署平台
- **构建部署**: Netlify
- **开发环境**: 本地开发服务器

## 功能模块

### 1. 用户认证模块
- 用户注册/登录
- 邮箱验证
- 密码重置
- 第三方登录集成

### 2. 课程管理模块
- 课程列表展示
- 课程详情页面
- 课程分类筛选
- 课程搜索功能

### 3. 学习笔记模块
- 笔记发布和编辑
- Markdown格式支持
- 笔记分类和标签
- 笔记搜索和筛选
- 点赞和评论功能

### 4. 个人中心模块
- 个人信息管理
- 我的笔记列表
- 学习进度跟踪
- 收藏管理

### 5. 社区互动模块
- 笔记评论系统
- 点赞和收藏功能
- 用户关注功能
- 消息通知系统

## 一、新增功能：论坛模块

### 1. 功能定位
为学生提供开放式话题交流场景，补充现有笔记评论功能的局限性，覆盖跨课程讨论、学习经验分享、问题互助等场景，增强平台社区属性。

### 2. 核心功能
- **论坛分区**  
  - 按课程划分子论坛（与课程管理模块联动，每个课程自动生成对应子论坛）  
  - 公共话题板块：「选课攻略」「期末互助」「学习工具推荐」「校园生活」等  
  - 板块搜索：支持按关键词筛选话题或板块  

- **话题管理**  
  - 发帖功能：支持标题+Markdown正文（复用笔记模块的编辑器组件）、添加话题标签（最多5个）  
  - 帖子类型：提问帖、讨论帖、经验帖（发布时可选，影响展示样式）  
  - 编辑与删除：作者可编辑自己的帖子，管理员可删除违规内容  

- **互动功能**  
  - 回复系统：支持多级回复、@用户、引用回复  
  - 点赞与收藏：对帖子或回复进行点赞，支持收藏优质帖子至个人中心  
  - 匿名功能：发布/回复时可选择匿名（匿名状态下隐藏用户名和头像，显示"匿名用户"）  

- **内容管理**  
  - 热门话题排序：按回复量、点赞量、发布时间（默认）排序  
  - 置顶功能：管理员可置顶重要通知（如课程调整、平台公告）  
  - 举报功能：用户可举报违规内容（如广告、人身攻击），触发审核流程  

### 3. 页面与路由
- 新增路由：  
  ```
  /forum               - 论坛首页（ForumHome）  
  /forum/course/:id    - 课程子论坛（ForumCourse）  
  /forum/topic/:id     - 话题详情（ForumTopic）  
  /forum/create        - 发布话题（CreateTopic）  
  ```
- 组件结构：  
  ```
  src/views/  
  ├── forum/  
  │   ├── ForumHome.vue       # 论坛首页  
  │   ├── ForumCourse.vue     # 课程子论坛  
  │   ├── ForumTopic.vue      # 话题详情  
  │   └── CreateTopic.vue     # 发布话题  
  src/components/forum/  
  ├── TopicCard.vue           # 话题卡片组件  
  ├── ReplyList.vue           # 回复列表组件  
  └── AnonymousSwitch.vue     # 匿名开关组件  
  ```

### 4. 数据模型（新增）
```sql
-- 话题表（topics）
id: UUID (主键)
title: string
content: text (Markdown)
content_html: text (HTML)
author_id: UUID (外键，关联users表)
course_id: UUID (外键，关联courses表，可为null表示公共话题)
tags: array<string>
type: enum('提问', '讨论', '经验')
is_anonymous: boolean
view_count: integer
like_count: integer
reply_count: integer
is_sticky: boolean (是否置顶)
created_at: timestamp
updated_at: timestamp

-- 回复表（replies）
id: UUID (主键)
topic_id: UUID (外键，关联topics表)
content: text
author_id: UUID (外键，关联users表)
is_anonymous: boolean
parent_id: UUID (外键，自关联，用于多级回复，可为null)
like_count: integer
created_at: timestamp
updated_at: timestamp
```

## 二、现有功能优化点

### 1. 课程管理模块优化
- **场景化入口**：首页新增「近期考试课程」「热门选课」「新生必看课程」等快捷入口，基于学期时间和用户年级智能推荐  
- **课程详情页增强**：  
  - 新增「课程评价」区（学生可评分、评论老师授课风格/给分情况，需关联用户选课记录避免恶意评价）  
  - 关联「往年试题」「作业参考」板块（支持用户上传，管理员审核后展示）  
  - 学习进度可视化：用进度条展示已完成笔记/讨论的占比，关联用户的笔记和论坛互动数据  

### 2. 学习笔记模块优化
- **发布流程简化**：  
  - 默认填充常用标签（如「期末复习」「课堂笔记」「作业思路」），支持一键选择  
  - 课程关联快捷选择：输入课程名时自动联想匹配，减少手动查找  
- **笔记详情页增强**：  
  - 目录导航：自动解析Markdown标题生成侧边目录，支持点击跳转  
  - 重点高亮：支持用户选中文字后标记为「重点」，高亮显示（仅自己可见）  
  - 关联话题：显示论坛中与该笔记相关的话题链接，形成"笔记-讨论"闭环  

### 3. 个人中心模块优化
- **内容聚合**：整合「我的笔记」「我的话题」「我的回复」「收藏（含笔记+话题）」于同一页面，用标签页切换  
- **学习数据看板**：展示近期发布内容的互动数据（点赞/评论量）、活跃课程、学习时长统计（基于笔记编辑和课程浏览时间）  
- **消息通知分类**：将通知分为「互动通知」（点赞/评论）、「系统通知」（审核结果）、「关注动态」（关注用户的新内容），支持一键已读  

### 4. 社区互动模块优化
- **降低社交门槛**：  
  - 评论区支持表情回复（集成基础表情库）  
  - 点赞/收藏后显示实时统计（如"已有23人觉得有用"）  
- **关注动态优化**：首页新增「关注动态」板块，展示关注用户的最新笔记和话题，按时间排序  

## 三、用户体验优化

### 1. 操作流程简化
- 登录/注册：支持校园邮箱一键注册（自动验证edu域名），减少填写项  
- 内容发布：笔记/话题发布页默认保存草稿（每30秒自动保存），避免意外丢失  
- 移动端适配：优化小屏设备的编辑体验（如Markdown工具栏折叠、键盘弹出时页面自适应）  

### 2. 性能与稳定性
- 列表加载：课程/笔记/话题列表采用虚拟滚动，支持快速滑动加载  
- 缓存策略：首页热门内容、用户常用课程数据本地缓存，减少重复请求  
- 错误处理：网络异常时显示友好提示，并提供重试按钮  

## 页面结构

### 路由配置
```
/                    - 首页 (Home)
/courses           - 课程列表 (Courses)
/course/:id        - 课程详情 (CourseDetail)
/posts             - 学习笔记列表 (Posts)
/post/:id          - 笔记详情 (PostDetail)
/write             - 发布笔记 (WritePost)
/profile           - 个人中心 (Profile)
/login             - 登录页面 (Login)
/register          - 注册页面 (Register)
/forum             - 论坛首页 (ForumHome)
/forum/course/:id  - 课程子论坛 (ForumCourse)
/forum/topic/:id   - 话题详情 (ForumTopic)
/forum/create      - 发布话题 (CreateTopic)
```

### 组件结构
```
src/
├── App.vue           # 根组件
├── main.js           # 入口文件
├── router/
│   └── index.js      # 路由配置
├── views/            # 页面级组件
│   ├── Home.vue      # 首页
│   ├── Courses.vue   # 课程列表
│   ├── CourseDetail.vue # 课程详情
│   ├── Posts.vue     # 笔记列表
│   ├── PostDetail.vue # 笔记详情
│   ├── WritePost.vue # 发布笔记
│   ├── Profile.vue  # 个人中心
│   ├── Login.vue    # 登录页面
│   ├── Register.vue # 注册页面
│   └── forum/        # 论坛模块
│       ├── ForumHome.vue
│       ├── ForumCourse.vue
│       ├── ForumTopic.vue
│       └── CreateTopic.vue
├── components/       # 公共组件
│   ├── Navbar.vue   # 导航栏
│   └── forum/       # 论坛组件
│       ├── TopicCard.vue
│       ├── ReplyList.vue
│       └── AnonymousSwitch.vue
└── supabase.js      # Supabase配置
```

## 核心功能详述

### 1. 首页功能
- **英雄区域**: 展示平台核心价值主张
- **特色功能**: 平台功能亮点介绍
- **热门课程**: 显示最受欢迎的课程
- **最新笔记**: 展示最新发布的学习笔记
- **关注动态**: 展示关注用户的最新内容

### 2. 课程管理功能
- **课程分类**: 按学科分类展示课程
- **搜索功能**: 按课程名称、描述搜索
- **课程详情**: 包含课程介绍、学习资料、相关笔记、课程评价
- **学习进度**: 跟踪个人学习进度

### 3. 笔记管理功能
- **富文本编辑**: 支持Markdown格式
- **标签系统**: 多标签分类管理
- **权限控制**: 公开/私有笔记设置
- **版本管理**: 笔记编辑历史记录

### 4. 论坛功能
- **话题管理**: 发帖、回复、点赞、收藏
- **社区互动**: 匿名发布、多级回复、@用户
- **内容管理**: 置顶、举报、审核机制

## 数据模型设计

### 用户表 (users)
```sql
id: UUID (主键)
email: string (唯一)
username: string
avatar_url: string
role: enum('student', 'teacher', 'admin')
created_at: timestamp
updated_at: timestamp
```

### 课程表 (courses)
```sql
id: UUID (主键)
title: string
description: text
category: string
instructor_id: UUID (外键)
cover_image: text
semester: string
is_public: boolean
created_at: timestamp
created_by: UUID (外键)
```

### 笔记表 (posts)
```sql
id: UUID (主键)
title: string
content: text (Markdown)
content_html: text (HTML)
author_id: UUID (外键)
course_id: UUID (外键)
type: enum('学习笔记', '技术文章', '问题讨论')
tags: array<string>
view_count: integer
like_count: integer
comment_count: integer
status: enum('draft', 'published')
created_at: timestamp
updated_at: timestamp
```

### 话题表 (topics)
```sql
id: UUID (主键)
title: string
content: text (Markdown)
content_html: text (HTML)
author_id: UUID (外键)
course_id: UUID (外键，可为null)
tags: array<string>
type: enum('提问', '讨论', '经验')
is_anonymous: boolean
view_count: integer
like_count: integer
reply_count: integer
is_sticky: boolean
created_at: timestamp
updated_at: timestamp
```

### 回复表 (replies)
```sql
id: UUID (主键)
topic_id: UUID (外键)
content: text
author_id: UUID (外键)
is_anonymous: boolean
parent_id: UUID (外键，自关联)
like_count: integer
created_at: timestamp
updated_at: timestamp
```

## 性能优化策略

### 1. 前端优化
- 组件懒加载
- 图片懒加载
- 虚拟滚动长列表
- 数据缓存策略

### 2. 后端优化
- 数据库索引优化
- API响应压缩
- 查询结果分页
- 缓存策略实现

## 安全性考虑

### 1. 认证安全
- JWT令牌管理
- 密码加密存储
- 会话超时控制
- 权限验证机制

### 2. 数据安全
- SQL注入防护
- XSS攻击防护
- CSRF防护
- 文件上传验证

## 部署要求

### 环境要求
- Node.js 16+
- 现代浏览器支持
- HTTPS协议支持
- 响应式设计支持

### 部署流程
1. 环境配置检查
2. 依赖安装
3. 构建生产版本
4. 部署到Netlify
5. 域名配置

## 项目进度

### 已完成功能
- ✅ 项目基础架构搭建
- ✅ Vue 3 + Vite 配置
- ✅ 路由系统配置
- ✅ 导航栏组件
- ✅ 首页页面开发
- ✅ 笔记列表页面
- ✅ 用户认证接口
- ✅ 响应式设计

### 待开发功能
- ⏳ 论坛模块开发
- ⏳ 课程详情页面完善
- ⏳ 笔记详情页面完善
- ⏳ 个人中心功能
- ⏳ 后台管理系统
- ⏳ 实时通知功能

## 未来扩展计划

### 短期计划 (1-3个月)
- 移动端App开发
- 离线学习功能
- 学习数据分析

### 长期计划 (3-6个月)
- 在线测试功能
- 学习小组功能
- AI智能推荐

## 总结

校园课程交流学习平台是一个功能完备的在线学习社区，具有良好的技术架构和用户体验设计。项目采用现代化的技术栈，具备良好的扩展性和维护性。平台的核心价值在于促进学生之间的知识共享和协作学习，提升学习效率和体验。

---

**文档版本**: v1.1  
**最后更新**: 2024-11-15  
**负责人**: 开发团队