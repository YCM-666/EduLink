# 校园课程交流学习平台 - 需求文档（完整版）

## 一、项目概述

### 1. 项目背景
当前大学生在课程学习中普遍面临**资料零散、协作不足、交流受限**等问题：课堂笔记分散在本地文档或纸质媒介中，难以共享复用；同课程学生缺乏便捷的话题讨论渠道；选课、复习等经验依赖私下传播，信息触达效率低。

本平台旨在构建一个专为大学生设计的**课程管理+笔记共享+社区交流**一体化工具，通过整合课程资源、简化笔记协作、开放话题讨论，解决学习场景中的核心痛点，促进知识流通与互助学习。


### 2. 项目目标
- 打造一站式课程资料管理中心，实现课程信息与学习笔记的结构化整合  
- 建立轻量化笔记共享社区，支持Markdown格式与互动反馈  
- 新增开放式论坛模块，覆盖选课、考试、作业等高频讨论场景  
- 提供个性化学习体验，包括进度跟踪、内容推荐、消息提醒  
- 确保跨设备使用流畅，优先适配移动端碎片化学习场景  


## 二、技术栈

### 1. 前端技术
- **框架**：Vue 3.3.4 + Composition API（高效组件化开发）  
- **路由**：Vue Router 4.2.4（页面跳转与权限控制）  
- **样式**：原生CSS + 响应式设计（适配PC/移动端）  
- **构建工具**：Vite 4.4.5（快速热更新与打包）  
- **富文本**：集成Markdown编辑器（支持笔记与论坛内容编辑）  


### 2. 后端技术
- **数据库**：Supabase（基于PostgreSQL，支持实时数据同步）  
- **认证**：Supabase Auth（邮箱验证、第三方登录、权限管理）  
- **API**：Supabase REST API（数据增删改查）  
- **存储**：Supabase Storage（用户头像、课程附件等文件存储）  


### 3. 部署与环境
- **部署平台**：Netlify（前端静态资源部署，支持CI/CD）  
- **开发环境**：Node.js 16+，现代浏览器（Chrome/Firefox/Safari）  
- **运行要求**：HTTPS协议（保障数据传输安全）  


## 三、核心功能模块

### 1. 用户认证模块
#### 功能描述
实现用户注册、登录及身份管理，保障账户安全与权限控制。

#### 核心功能
- **注册/登录**：支持校园邮箱注册（自动验证edu域名）、密码登录、第三方登录（可选微信/QQ）  
- **账户管理**：个人信息编辑（用户名、头像）、密码重置（邮箱验证）、账号注销  
- **权限控制**：区分普通用户与管理员，管理员可管理违规内容  

#### 流程优化
- 注册流程：减少必填项（仅邮箱、密码、用户名），注册后自动发送验证邮件  
- 登录状态：持久化存储（7天免登录），敏感操作（如改密码）需二次验证  


### 2. 课程管理模块
#### 功能描述
提供课程的查询、筛选与详情展示，关联笔记与论坛讨论，形成课程学习闭环。

#### 核心功能
- **课程列表**：  
  - 按学科分类（如计算机、数学、外语）  
  - 场景化入口（首页展示「近期考试课程」「热门选课」「新生必看」）  
  - 搜索功能（支持课程名、教师名模糊查询）  
- **课程详情**：  
  - 基础信息（课程简介、教师、学分、上课时间）  
  - 关联内容（相关笔记列表、论坛讨论话题、往年试题/作业参考）  
  - 学习数据（选课人数、平均评分、学生评价）  
- **个人课程管理**：用户可「收藏课程」，在个人中心集中查看  


### 3. 学习笔记模块
#### 功能描述
支持Markdown格式笔记的发布、编辑与共享，方便学生整理与复用学习资料。

#### 核心功能
- **笔记编辑**：  
  - Markdown全功能支持（标题、列表、代码块、公式等）  
  - 自动保存草稿（每30秒本地缓存，避免内容丢失）  
  - 关联课程（发布时选择对应课程，支持快速联想匹配）  
- **笔记管理**：  
  - 标签系统（默认提供「期末复习」「课堂笔记」等常用标签，支持自定义）  
  - 权限设置（公开/仅自己可见）  
  - 版本记录（保留最近5次编辑历史，支持回滚）  
- **笔记详情与互动**：  
  - 目录导航（自动解析Markdown标题生成侧边栏目录）  
  - 重点高亮（用户可标记文本为重点，仅自己可见）  
  - 点赞/评论（支持表情回复、@用户）  
  - 关联话题（显示论坛中与笔记相关的讨论链接）  


### 4. 论坛模块（新增）
#### 功能描述
提供开放式话题讨论场景，补充笔记评论的局限性，覆盖跨课程交流需求。

#### 核心功能
- **论坛分区**：  
  - 课程子论坛（与课程管理联动，每个课程自动生成对应分区）  
  - 公共板块（「选课攻略」「期末互助」「学习工具推荐」「校园生活」）  
- **话题管理**：  
  - 发帖功能（标题+Markdown正文，支持选择话题类型：提问/讨论/经验）  
  - 匿名发布（可选隐藏用户名，适合敏感话题如「挂科补救」）  
  - 编辑/删除（作者可编辑，管理员可删除违规内容）  
- **互动功能**：  
  - 多级回复（支持引用回复、@用户）  
  - 点赞/收藏（优质话题可收藏至个人中心）  
  - 热门排序（按回复量、点赞量、发布时间筛选）  


### 5. 个人中心模块
#### 功能描述
整合用户的内容创作、互动记录与学习数据，提供个性化视图。

#### 核心功能
- **内容聚合**：  
  - 我的笔记（按创建时间/浏览量排序）  
  - 我的话题/回复（论坛互动记录）  
  - 收藏夹（分类展示收藏的笔记与话题）  
- **学习数据**：  
  - 活跃度统计（发布内容数量、互动量）  
  - 关注动态（展示关注用户的最新笔记/话题）  
  - 学习进度（关联课程的笔记完成度、浏览时长）  
- **消息通知**：  
  - 分类展示（互动通知：点赞/评论；系统通知：审核结果）  
  - 一键已读（支持批量标记通知为已读）  


### 6. 社区互动模块
#### 功能描述
增强用户间连接，促进内容传播与反馈。

#### 核心功能
- **关注系统**：用户可关注其他用户，在首页获取其动态  
- **消息系统**：实时推送互动通知（如“XX赞了你的笔记”）  
- **分享功能**：支持笔记/话题分享至微信、QQ等社交平台  


## 四、页面结构与路由

### 1. 路由配置
```
/                    - 首页 (Home)
/courses             - 课程列表 (Courses)
/course/:id          - 课程详情 (CourseDetail)
/posts               - 笔记列表 (Posts)
/post/:id            - 笔记详情 (PostDetail)
/write               - 发布笔记 (WritePost)
/forum               - 论坛首页 (ForumHome)
/forum/course/:id    - 课程子论坛 (ForumCourse)
/forum/topic/:id     - 话题详情 (ForumTopic)
/forum/create        - 发布话题 (CreateTopic)
/profile             - 个人中心 (Profile)
/login               - 登录页面 (Login)
/register            - 注册页面 (Register)
```


### 2. 组件结构
```
src/
├── App.vue               # 根组件
├── main.js               # 入口文件
├── router/
│   └── index.js          # 路由配置
├── views/                # 页面级组件
│   ├── Home.vue          # 首页
│   ├── Courses.vue       # 课程列表
│   ├── CourseDetail.vue  # 课程详情
│   ├── Posts.vue         # 笔记列表
│   ├── PostDetail.vue    # 笔记详情
│   ├── WritePost.vue     # 发布笔记
│   ├── forum/            # 论坛相关页面
│   │   ├── ForumHome.vue
│   │   ├── ForumCourse.vue
│   │   ├── ForumTopic.vue
│   │   └── CreateTopic.vue
│   ├── Profile.vue       # 个人中心
│   ├── Login.vue         # 登录页面
│   └── Register.vue      # 注册页面
├── components/           # 公共组件
│   ├── Navbar.vue        # 导航栏
│   ├── MarkdownEditor.vue # Markdown编辑器（复用）
│   ├── TopicCard.vue     # 论坛话题卡片
│   └── ReplyList.vue     # 回复列表
└── supabase.js           # Supabase配置
```


## 五、数据模型设计

### 1. 用户表（users）
```sql
id: UUID (主键)
email: string (唯一，校园邮箱)
username: string (用户昵称)
avatar_url: string (头像地址，默认使用系统头像)
created_at: timestamp (注册时间)
updated_at: timestamp (信息更新时间)
```


### 2. 课程表（courses）
```sql
id: UUID (主键)
title: string (课程名称)
description: text (课程描述)
category: string (学科分类，如“计算机科学”)
instructor: string (授课教师)
enrollment_count: integer (选课人数，默认0)
created_at: timestamp
created_by: UUID (外键，关联users表，创建者)
```


### 3. 笔记表（posts）
```sql
id: UUID (主键)
title: string (笔记标题)
content: text (Markdown原文)
content_html: text (转换后的HTML，用于展示)
author_id: UUID (外键，关联users表)
course_id: UUID (外键，关联courses表，所属课程)
tags: array<string> (标签数组)
view_count: integer (浏览量，默认0)
like_count: integer (点赞数，默认0)
comment_count: integer (评论数，默认0)
is_public: boolean (是否公开，默认true)
created_at: timestamp
updated_at: timestamp
```


### 4. 评论表（comments）（用于笔记评论）
```sql
id: UUID (主键)
post_id: UUID (外键，关联posts表)
author_id: UUID (外键，关联users表)
content: text (评论内容)
parent_id: UUID (外键，自关联，用于多级回复，可为null)
created_at: timestamp
```


### 5. 话题表（topics）（论坛模块）
```sql
id: UUID (主键)
title: string (话题标题)
content: text (Markdown原文)
content_html: text (转换后的HTML)
author_id: UUID (外键，关联users表)
course_id: UUID (外键，关联courses表，可为null表示公共话题)
tags: array<string> (话题标签)
type: enum('提问', '讨论', '经验') (话题类型)
is_anonymous: boolean (是否匿名，默认false)
view_count: integer (浏览量)
like_count: integer (点赞数)
reply_count: integer (回复数)
is_sticky: boolean (是否置顶，管理员操作)
created_at: timestamp
updated_at: timestamp
```


### 6. 回复表（replies）（论坛回复）
```sql
id: UUID (主键)
topic_id: UUID (外键，关联topics表)
author_id: UUID (外键，关联users表)
content: text (回复内容)
is_anonymous: boolean (是否匿名)
parent_id: UUID (外键，自关联，用于多级回复)
like_count: integer (点赞数)
created_at: timestamp
```


### 7. 关联表
- **用户关注表（follows）**：`follower_id`（关注者）、`followed_id`（被关注者）、`created_at`  
- **收藏表（favorites）**：`user_id`、`target_id`（笔记/话题ID）、`target_type`（区分笔记/话题）、`created_at`  
- **点赞表（likes）**：`user_id`、`target_id`、`target_type`、`created_at`  


## 六、用户体验优化

### 1. 操作简化
- 笔记/话题发布：减少点击层级，编辑器默认展开常用功能按钮  
- 内容查找：首页搜索框支持全局搜索（课程/笔记/话题），结果分类展示  
- 移动端适配：优化小屏设备交互（如编辑器工具栏折叠、列表滑动加载）  


### 2. 性能保障
- 列表优化：课程/笔记/话题列表采用虚拟滚动，支持快速滑动加载  
- 缓存策略：热门内容、用户常用课程本地缓存，减少重复请求  
- 错误处理：网络异常时显示重试按钮，表单提交失败自动保留内容  


## 七、安全性考虑

1. **数据安全**：  
   - 密码加密存储（依赖Supabase Auth）  
   - 输入内容过滤（防XSS攻击，Markdown转HTML时清理恶意代码）  
   - 文件上传验证（限制格式与大小，防恶意文件）  

2. **权限控制**：  
   - 内容访问：私有笔记仅作者可见，公开内容需审核后展示  
   - 操作权限：仅作者可编辑自己的内容，管理员拥有删除权限  


## 八、项目进度

### 已完成功能
- ✅ 项目基础架构（Vue 3 + Vite + Supabase）  
- ✅ 路由与导航栏组件  
- ✅ 首页与笔记列表页面  
- ✅ 用户认证接口（注册/登录）  


### 待开发功能
- ⏳ 课程管理模块（列表+详情页）  
- ⏳ 笔记模块完善（编辑+详情+互动）  
- ⏳ 论坛模块（全功能开发）  
- ⏳ 个人中心与消息系统  
- ⏳ 移动端适配优化  


## 九、未来扩展计划

### 短期（1-3个月）
- 学习数据看板（生成个人学习报告）  
- 离线缓存功能（支持无网络查看已加载内容）  

### 中期（3-6个月）
- 智能推荐系统（基于浏览记录推荐课程/笔记）  
- 学习小组功能（支持创建私密讨论空间）  


## 十、文档信息
- **版本**：v2.0  
- **最后更新**：2024-11-16  
- **负责人**：开发团队  

--- 

本需求文档整合了核心功能与新增论坛模块，聚焦学生实际使用场景，通过简化操作、强化内容联动、降低社交门槛，确保平台“好用、易用、常用”。